<template>
  <div class="page">
    <list class="list-container">
      <!-- Header Section with background -->
      <list-item type="header" class="header-item">
        <stack class="top-banner">
          <image class="top-bg" src="/pkg_test/assets/img/shenghuochangshi-bg.png"></image>
        </stack>
      </list-item>
      
      <!-- Content Section -->
      <list-item type="content" class="content-section">
        <div class="list-content">
          <block for="{{(index, item) in listData}}">
            <div class="list-item-wrapper">
              <div class="item-content" onclick="goToDetail" data-index="{{index}}">
                <div class="item-text-col">
                  <text class="item-title">{{item.title}}</text>
                  <div class="item-info">
                    <image class="info-icon" src="/pkg_test/assets/img/liulan.png"></image>
                    <text class="info-text">{{item.views}} 人</text>
                  </div>
                </div>
                <image class="item-image" src="{{item.image}}" style="background-color: #eeeeee;"></image>
              </div>
              <!-- 分割线 -->
              <div class="divider"></div>
            </div>
          </block>
        </div>
      </list-item>
      
      <!-- 底部留白 -->
      <list-item type="bottom" class="bottom-space"></list-item>
    </list>
  </div>
</template>

<script>
import router from '@system.router'

export default {
  data: {
    listData: [
      { title: '冰箱食材储存：这样放既保鲜又卫生', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/6.jpg' },
      { title: '蔬菜焯水技巧：保留营养还去草酸', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/12.jpg' },
      { title: '衣物顽固污渍去除：分类型处理更高效', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/2.jpg' },
      { title: '正确刷牙方法：预防蛀牙和牙周炎', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/15.jpg' },
      { title: '居家除螨：简单有效方法大集合', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/16.jpg' },
      { title: '煮饺子不粘皮：掌握3个关键步骤', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/7.jpg' },
      { title: '缓解眼部疲劳：日常护理小妙招', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/18.jpg' },
      { title: '厨房油污清洁：天然清洁剂更安全', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/14.jpg' },
      { title: '水果正确清洗：去除农药残留更安心', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/20.jpg' },
      { title: '衣物晾晒：这样晒既杀菌又不变形', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/16.jpg' },
      { title: '缓解轻微烫伤：紧急处理四步法', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/3.jpg' },
      { title: '大米储存：防潮防虫小技巧', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/4.jpg' },
      { title: '正确洗手：预防细菌感染的关键', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/5.jpg' },
      { title: '居家防潮：梅雨季必备小妙招', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/6.jpg' },
      { title: '煮米饭更香：关键步骤不能少', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/7.jpg' },
      { title: '皮肤晒伤修复：紧急处理和日常护理', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/8.jpg' },
      { title: '厨房刀具保养：锋利耐用的小技巧', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/9.jpg' },
      { title: '缓解鼻塞：简单有效的居家方法', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/10.jpg' },
      { title: '衣物收纳：节省空间又整齐的小妙招', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/11.jpg' },
      { title: '预防厨房火灾：安全用电用气小常识', views: 2580, image: 'https://cdn.shijinzhuang.com/quick/shycp/cs/13.jpg' }
    ]
  },
  onInit() {
    console.log('Changshi组件 onInit - listData长度:', this.listData ? this.listData.length : 0)
  },
  refreshData() {
    console.log('Changshi组件 refreshData 被调用')
  },
  goToDetail(evt) {
    const index = evt.target.attr.dataIndex
    router.push({
      uri: '/pkg_test/pages/ChangshiDetail',
      params: {
        index: index
      }
    })
  }
}
</script>

<style>
.page {
  /* flex-direction: column; */
  background-color: #f5f5f5;
  height: 100%;
}

.top-bg {
  width: 100%;
  height: 104px;
  object-fit: cover;
}

.list-container {
  flex: 1;
  width: 100%;
  flex-direction: column;
}

.header-item {
  width: 100%;
}

.top-banner {
  width: 100%;
  height: 104px;
}

.content-section {
  width: 100%;
  flex-direction: column;
  margin-top: -12px;
  margin-left: 7px;
  margin-right: 7px;
  padding-left: 7px;
  padding-right: 7px;
  background-color: rgba(255, 255, 255, 0.95);
  border-top-left-radius: 9px;
  border-top-right-radius: 9px;
  padding-top: 7px;
}

.list-content {
  flex: 1;
  width: 100%;
  flex-direction: column;
}

.list-item-wrapper {
  flex-direction: column;
  width: 100%;
}

.item-content {
  flex-direction: row;
  justify-content: space-between;
  padding: 7px 0;
}

.item-text-col {
  flex: 1;
  flex-direction: column;
  justify-content: space-between;
  margin-right: 5px;
  padding-bottom: 1px;
}

.item-title {
  font-size: 7px;
  color: #333333;
  font-weight: bold;
  line-height: 10px;
  lines: 2;
  text-overflow: ellipsis;
}

.item-info {
  flex-direction: row;
  align-items: center;
  margin-top: 5px;
}

.info-icon {
  width: 7px;
  height: 7px;
  object-fit: contain;
  margin-right: 2px;
  margin-bottom: 3px;
}

.info-text {
  font-size: 6px;
  color: #999999;
}

.item-image {
  width: 51px;
  height: 37px;
  border-radius: 4px;
  object-fit: cover;
}

.divider {
  height: 0px;
  background-color: #f0f0f0;
  width: 100%;
}

.bottom-space {
  height: 46px; /* 为底部 TabBar 留出空间 */
}
</style>
